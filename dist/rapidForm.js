!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RapidForm=t():e.RapidForm=t()}(window,function(){return function(e){function t(t){for(var n,o,a=t[0],c=t[1],l=t[2],u=0,p=[];u<a.length;u++)o=a[u],s[o]&&p.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);p.length;)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={1:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonpRapidForm=window.webpackJsonpRapidForm||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;return i.push(["./index.tsx",0]),r()}({"./index.tsx":function(e,t,r){"use strict";r.r(t);var n={};r.d(n,"setFields",function(){return oe}),r.d(n,"setTheme",function(){return ae}),r.d(n,"checkAllReqFields",function(){return ce}),r.d(n,"setCheckError",function(){return le}),r.d(n,"default",function(){return de});var s=r("../node_modules/react/index.js");var i=(e,t,r,n)=>{switch(e){case"text":case"password":case"email":case"hidden":return s.createElement(he,Object.assign({key:r,"data-key":r},t));case"file":return s.createElement(me,Object.assign({key:r,"data-key":r},t));case void 0:return console.error("Warning: The prop `type` is marked as required, but its value is `undefined`"),null;default:return console.warn(`Warning: This prop type='${e}' is not supported`),null}},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const a=(e,t,r,n)=>{const{formid:c}=t;switch(e){case"input":const{type:n}=t;return i(n,t,r);case"button":return s.createElement(Y,Object.assign({},t));case"select":return s.createElement(fe,Object.assign({"data-key":r},t));case void 0:return console.error("Warning: The prop `type` is marked as required, but its value is `undefined`"),null;default:const{children:l}=t,d=o(t,["children"]),u=Reflect.get(t,"children");if(Array.isArray(u)&&u.length>1){const t=u.map((e,t)=>{const r=Reflect.get(e.valueOf(),"type"),n=Reflect.get(e.valueOf(),"props");return a(r,Object.assign({},n,{formid:c}),t,e)});return s.createElement(e,Object.assign({},d,{key:r,formid:c}),t)}if("string"==typeof u)return s.createElement(e,Object.assign({},d,{key:r,formid:c}),u);const p=Reflect.get(u.valueOf(),"type"),h=Reflect.get(u.valueOf(),"props"),m=a(p,Object.assign({},h,{formid:c}),r,u);return s.createElement(e,Object.assign({},d,{key:r,formid:c}),m)}};var c=a,l=r("../node_modules/immutable/dist/immutable.js"),d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const u=(e,t)=>{const r=[];return e.map(e=>{e.get("type"),e.get("key");const n=e.get("props").toJS(),{children:s,required:i,name:o}=n;d(n,["children","required","name"]);if(s){const{props:e}=s,{required:n,name:i}=e;Array.isArray(s),n&&!Reflect.get(t,i)?r.push({name:i,check:!1}):o&&r.push({name:i,check:!0})}i&&!Reflect.get(t,o)?r.push({name:o,check:!1}):o&&r.push({name:o,check:!0})}),r.find(e=>{const{check:t}=e;return!1===t})};var p=(e,t)=>{let r=Object(l.Map)();return e.split(",").map(e=>{switch(e){case"empty":default:(""===t||void 0===t||Array.isArray(t)&&0===t.length)&&(r=r.set(e,!0))}}),r},h=r("../node_modules/material-ui-icons/FileUpload.js"),m=r.n(h),f=r("../node_modules/material-ui/Button/index.js"),y=r.n(f),b=r("../node_modules/material-ui/Checkbox/index.js"),O=r.n(b),g=r("../node_modules/material-ui/Chip/index.js"),j=r.n(g),v=r("../node_modules/material-ui/Form/index.js"),E=r("../node_modules/material-ui/Input/index.js"),x=r.n(E),k=r("../node_modules/material-ui/List/index.js"),R=r("../node_modules/material-ui/Menu/index.js"),w=r("../node_modules/material-ui/Select/index.js"),C=r.n(w),S=r("../node_modules/material-ui/styles/index.js"),T=r("../node_modules/material-ui/TextField/index.js"),P=r.n(T),_=r("../node_modules/material-ui/Typography/index.js"),F=r.n(_),q=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};var M=class{constructor(e){this.handleInputFile=(()=>{this.inputFile.click()}),this.renderField=((e,t,r)=>{switch(this.themeName){case"material-ui":switch(e){case"text":case"email":case"password":case"hidden":const{value:n}=t;return s.createElement(P.a,Object.assign({type:e},t,{value:n||""}));case"file":const{value:i,error:o}=t,a=q(t,["value","error"]);return s.createElement("div",null,s.createElement(y.a,{variant:"raised",onClick:this.handleInputFile},"upload",s.createElement(m.a,null),s.createElement("input",Object.assign({ref:e=>{this.inputFile=e},style:{display:"none"},type:e},a))),s.createElement(F.a,{type:"subheading"},i||""));case"button":const{children:c}=t,l=q(t,["children"]);return s.createElement(y.a,Object.assign({},l),c);case"select":const{children:d}=t,u=q(t,["children"]),{multiple:p,value:h,placeholder:f,withChip:b,multiCheckbox:O,error:g,required:k}=u;Reflect.deleteProperty(u,"withChip"),Reflect.deleteProperty(u,"multiCheckbox");const R=s.createElement(x.a,{id:"select-placeholder"}),w={required:k};if(p){Reflect.deleteProperty(u,"value");const e=""!==h&&h?h:[],t=b?e=>e?e.map((e,t)=>s.createElement(j.a,{key:t,label:e})):[]:e=>e.join(", ");return f?s.createElement(v.FormControl,{error:g},s.createElement(E.InputLabel,{htmlFor:"select-placeholder"},f),s.createElement(C.a,Object.assign({inputProps:w,value:e,renderValue:t,input:R},u),this.renderMultipleSelect(d,e,O))):s.createElement(C.a,Object.assign({value:e,renderValue:t,inputProps:w},u),this.renderMultipleSelect(d,e,O))}return f?s.createElement(v.FormControl,{error:g},s.createElement(E.InputLabel,{htmlFor:"select-placeholder"},f),s.createElement(C.a,Object.assign({native:!0,input:R,inputProps:w},u),d)):s.createElement(C.a,Object.assign({native:!0,inputProps:w},u),d);default:return r}default:return r}}),this.renderMultipleSelect=((e,t,r)=>(Array.isArray(e)?e:[e]).map((e,n)=>{const{props:i}=e,{value:o,children:a}=i,c=q(i,["value","children"]),l=!!Array.isArray(t)&&t.indexOf(o)>-1;return r?s.createElement(R.MenuItem,Object.assign({key:n,value:o},c),s.createElement(O.a,{checked:l}),s.createElement(k.ListItemText,{primary:a})):s.createElement(R.MenuItem,Object.assign({key:n,value:o},c),s.createElement(k.ListItemText,{primary:a}))})),this.themeName=e}renderByTheme(e,t={}){switch(this.themeName){case"material-ui":const r=Object(S.createMuiTheme)(t);return s.createElement("div",null,s.createElement(S.MuiThemeProvider,{theme:r},e));default:return e}}},A=r("../node_modules/prop-types/index.js"),J=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};class B extends s.Component{constructor(){super(...arguments),this.handleRenderByTheme=(()=>{const e=this.props,{children:t,theme:r,errors:n,formid:i}=e,o=J(e,["children","theme","errors","formid"]),a=new M(r),c=n.get(i)&&n.get(i).size>0,l=Object.assign({},o,{disabled:c}),d=s.createElement("button",Object.assign({},l),t);return a.renderField("button",Object.assign({},l,{children:t}),d)})}render(){const e=this.props,{dispatch:t,children:r}=e;J(e,["dispatch","children"]);return this.handleRenderByTheme()}}B.propTypes={children:A.oneOfType([A.string,A.element]),className:A.string,errors:A.instanceOf(l.Map),formid:A.string.isRequired,key:A.oneOfType([A.string,A.number]),name:A.string,style:A.object,theme:A.string,type:A.oneOf(["submit","reset","button","menu"]).isRequired};var I=B,V=r("../node_modules/form-serialize/index.js");class z extends s.Component{constructor(){super(...arguments),this.renderByThemes=(e=>{const{theme:t,overrideTheme:r}=this.props;return new M(t).renderByTheme(e,r)}),this.readChildren=(()=>{const{children:e,id:t,key:r,theme:n}=this.props;if(e.length>1)return e.map((e,r)=>{const n=Reflect.get(e.valueOf(),"props"),s=Reflect.get(e.valueOf(),"type"),i=Object.assign({},n,{formid:t});return c(s,i,`${r}`,e)});const s=Reflect.get(e.valueOf(),"props"),i=Reflect.get(e.valueOf(),"type"),o=Object.assign({},s,{formid:t});return[c(i,o,!r&&t)]}),this.handleSubmit=(e=>{const{onSubmit:t,id:r,fields:n,checkAllReqFields:s}=this.props;e.preventDefault();const i=document.querySelector(`#${r}`),o=V(i,{hash:!0}),a=0===Object.keys(o).length,c=u(n.get(r),o);if("function"==typeof t&&!a&&void 0===c)return t(e,o);s(r)})}componentDidMount(){const{fields:e,setFields:t,setTheme:r,theme:n,id:s}=this.props;e instanceof l.Map&&t(this.readChildren(),s),n&&r(n)}componentWillUpdate(e){const{fields:t,setFields:r}=this.props,{id:n}=e;!t.find((e,t)=>t===n)&&t.size>0&&r(this.readChildren(),n)}render(){const{children:e,id:t,name:r,fields:n,onSubmit:i,method:o}=this.props,a=n.get(t)?n.get(t).toJS():null;return this.renderByThemes(s.createElement("form",{key:t,id:t,name:r||t,method:o,onSubmit:this.handleSubmit},a))}}z.propTypes={checkAllReqFields:A.func.isRequired,fields:A.instanceOf(l.Map),id:A.string.isRequired,method:A.oneOf(["get","post"]).isRequired,onSubmit:A.func,overrideTheme:A.object,setFields:A.func.isRequired,setTheme:A.func.isRequired,theme:A.oneOf(["material-ui"])};var N=z,L=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};class W extends s.Component{constructor(){super(...arguments),this.handleValidation=(e=>{const t=this.props,{setCheckError:r}=t,n=L(t,["setCheckError"]),s=Reflect.get(this.props,"data-validation"),i=Reflect.get(e.target,"value"),o=Reflect.get(n,"required"),a=Reflect.get(n,"data-key"),c=p(s,i);if(!s||!o)return r(Object.assign({},n,{value:i}),a,Object(l.Map)());r(Object.assign({},n,{value:i}),a,c)}),this.handleRenderByTheme=(()=>{const e=this.props,{setCheckError:t,theme:r,type:n}=e,i=L(e,["setCheckError","theme","type"]),o=new M(r),a=s.createElement("input",Object.assign({},i,{onChange:this.handleValidation})),c=Object.assign({onChange:this.handleValidation},i);return o.renderField(n,c,a)})}render(){return this.handleRenderByTheme()}}W.propTypes={className:A.string,key:A.oneOfType([A.string,A.number]),name:A.string,setCheckError:A.func,style:A.object,theme:A.string,type:A.oneOf(["text","password","email","hidden"]).isRequired};var $=W,D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};class H extends s.Component{constructor(){super(...arguments),this.handleValidation=(e=>{const t=this.props,{setCheckError:r}=t,n=D(t,["setCheckError"]),s=Reflect.get(this.props,"data-validation"),i=Reflect.get(e.target.files[0],"name"),o=Reflect.get(n,"required"),a=Reflect.get(n,"data-key"),c=p(s,i);if(!s||!o)return r(Object.assign({},n,{value:i}),a,Object(l.Map)());r(Object.assign({},n,{value:i}),a,c)}),this.handleRenderByTheme=(()=>{const e=this.props,{setCheckError:t,theme:r,type:n}=e,i=D(e,["setCheckError","theme","type"]),o=new M(r),a=s.createElement("input",Object.assign({},i,{onChange:this.handleValidation})),c=Object.assign({onChange:this.handleValidation},i);return o.renderField(n,c,a)})}render(){return this.handleRenderByTheme()}}H.propTypes={className:A.string,key:A.oneOfType([A.string,A.number]),name:A.string,setCheckError:A.func,style:A.object,theme:A.string,type:A.oneOf(["file"]).isRequired};var U=H,K=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};class G extends s.Component{constructor(){super(...arguments),this.handleValidation=(e=>{const t=this.props,{setCheckError:r}=t,n=K(t,["setCheckError"]),s=Reflect.get(this.props,"data-validation"),i=Reflect.get(e.target,"value"),o=Reflect.get(n,"required"),a=Reflect.get(n,"data-key"),c=p(s,i);if(!s||!o)return r(Object.assign({},n,{value:i}),a,Object(l.Map)());r(Object.assign({},n,{value:i}),a,c)}),this.handleRenderByTheme=(()=>{const e=this.props,{setCheckError:t,children:r,theme:n,errors:i}=e,o=K(e,["setCheckError","children","theme","errors"]),a=new M(n),c=s.createElement("select",Object.assign({},o),r),l=Object.assign({onChange:this.handleValidation},o);return a.renderField("select",Object.assign({},l,{children:r}),c)})}render(){const e=this.props,{dispatch:t,children:r}=e;K(e,["dispatch","children"]);return this.handleRenderByTheme()}}G.propTypes={children:A.oneOfType([A.string,A.element,A.array]),className:A.string,errors:A.instanceOf(l.Map),key:A.oneOfType([A.string,A.number]),name:A.string,setCheckError:A.func,style:A.object,theme:A.string};var Q=G,X=r("../node_modules/react-redux/es/index.js");var Y=Object(X.b)(({button:e,form:{theme:t,errors:r}},n)=>Object.assign({},e,n,{theme:t,errors:r}),(e,t)=>({}))(I);var Z=["text","password"];r("./types/container.ts"),r("./types/function.ts");const ee={payload:null,type:""},te={errors:Object(l.Map)(),fields:Object(l.Map)(),theme:""},re="SET_FIELDS",ne="SET_THEME",se="SET_ERRORS",ie="SET_CHECK_ERROR",oe=(e,t)=>({fields:Object(l.fromJS)(e),id:t,type:re}),ae=e=>({theme:e,type:ne}),ce=e=>(t,r)=>{const{form:{fields:n}}=r();n.get(e).map(e=>{const r=e.get("key"),n=e.get("props").toJS(),{children:s}=n;if(s){if(Array.isArray(s))return null;const e=Reflect.get(s,"props"),{value:n,type:i,required:o}=e;if(!Z.find(e=>e===i)&&!o)return null;const a=Reflect.get(e,"data-validation");t(le(e,r,p(a,n)))}const{value:i,type:o,required:a}=n;if(!Z.find(e=>e===o)&&!a)return null;const c=Reflect.get(n,"data-validation");t(le(n,r,p(c,i)))})},le=(e,t,r)=>(n,i)=>{const o=i().form.errors,{name:a,value:c,formid:u}=e;n({errors:((e,t,r,n,s)=>{const i=n.get(e);return s.size>0?n.setIn([e,t],Object(l.fromJS)(Object.assign({name:r},s.toJS()))).filter(e=>void 0!==e):i&&i.size>0&&i.getIn([`${t}`,"name"])===r?1===i.size?i.delete("0"):n.setIn([e],i.delete(`${t}`)):n})(u,t,a,o,r),type:se});const p=Object(l.fromJS)(i().form.fields.get(u)),h=p.filter(e=>e.get("key")===t),m=((e,t,r="")=>e.map(e=>{const n=e.get("type"),i=e.get("key"),o=e.get("props").toJS(),{children:a}=o,c=d(o,["children"]);if(a){const{props:e}=a;if(Array.isArray(a))return null;const o=Object.assign({},e,{error:!t,value:r});return Object(l.fromJS)(s.createElement(n,Object.assign({},c,{key:i}),s.cloneElement(a,o)))}const u=Object.assign({},c,{error:!t});return Object(l.fromJS)(s.createElement(n,Object.assign({},u,{key:i,value:r})))}))(h,0===r.size,c),f=h.merge(m);return n({fields:p.update(t,()=>Object(l.fromJS)(f.toJS()[0])),id:u,type:ie})};function de(e=te,t=ee){const{type:r,fields:n,theme:s,errors:i,id:o}=t;switch(r){case re:case ie:const t=e.fields.set(o,n);return Object.assign({},e,{fields:t});case se:return Object.assign({},e,{errors:i});case ne:return Object.assign({},e,{theme:s});default:return e}}var ue=r("../node_modules/redux/es/index.js");var pe=Object(X.b)(({form:e},t)=>Object.assign({},e,t),e=>Object(ue.bindActionCreators)(Object.assign({},n),e))(N);var he=Object(X.b)(({input:e,form:{theme:t}},r)=>Object.assign({},e,r,{theme:t}),e=>Object(ue.bindActionCreators)({setCheckError:le},e))($);var me=Object(X.b)(({input:e,form:{theme:t}},r)=>Object.assign({},e,r,{theme:t}),e=>Object(ue.bindActionCreators)({setCheckError:le},e))(U);var fe=Object(X.b)(({select:e,form:{theme:t,errors:r}},n)=>Object.assign({},e,n,{theme:t,errors:r}),e=>Object(ue.bindActionCreators)({setCheckError:le},e))(Q),ye=Object(ue.combineReducers)({form:de}),be=r("../node_modules/redux-devtools-extension/index.js"),Oe=r("../node_modules/redux-thunk/lib/index.js"),ge=r.n(Oe),je=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const ve=Object(be.composeWithDevTools)(Object(ue.applyMiddleware)(ge.a)),Ee=Object(ue.createStore)(ye,ve);t.default=class extends s.Component{render(){const e=this.props,{children:t}=e,r=je(e,["children"]);return s.createElement(X.a,{store:Ee},s.createElement(pe,Object.assign({},r),t))}}},"./types/container.ts":function(e,t){},"./types/function.ts":function(e,t){}})});
//# sourceMappingURL=rapidForm.js.map